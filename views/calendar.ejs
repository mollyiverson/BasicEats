<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <link rel="stylesheet" href="./css/calendar.css" />

    <title>Basic Eats</title>
</head>
<link rel="stylesheet" href="https://mdbootstrap.com/docs/standard/extended/dropdown-checkbox/#">
<script src="https://mdbootstrap.com/docs/standard/extended/dropdown-checkbox/#"></script>
<script>

    
</script>

<body>
    <!--NAVBAR:-->
    <%- include('header.ejs') %>

        <div class="container">
            <div class="row " style="margin-top:0px; padding-top: 0px;">
                <!--CALENDAR:-->
                <div class="left column col-7" style="background-color: #6f8c69; margin-top:0px; ">
                    <h1>Weekly Meal Calendar</h1>
                    <form action="/calendar/previousWeek" method="POST" style="display:inline-block">
                    <button type="submit"><image src="images/next.png"
                                        style="transform: rotate(180deg); display:inline; color: gray; opacity: .4; height: 20px; cursor: pointer;">
                                    </image></button></form>
                                    <form action="/calendar/nextWeek" method="POST" style="display:inline-block">
                                        <button type="submit"><image src="images/next.png"
                                        style="display:inline; color: gray; opacity: .4; height: 20px; cursor: pointer;">
                                    </image></button></form>
                    <div class="calendar">
                        
                        <!--Sunday-->
                        <div class="day">
                            <form action="/calendar/updateDay" method="POST">
                                <button type="submit" name="action" class="dayType" value="Sunday"><u>Sunday</u><p style="font-weight: normal; font-size: 11px">(<%= weekDates[0] %>)</p></button>
                                <button type="submit" name="action" class="meal1" value="Sunday">
                                    <% if (mealsByDay['Sunday'][1].length> 0) { %>
                                        <%= mealsByDay['Sunday'][1][0].name %>
                                            <% } else { %>
                                                no meals
                                                <% } %>
                                </button>
                                <button type="submit" name="action" class="meal2" value="Sunday">
                                    <% if (mealsByDay['Sunday'][2].length> 0) { %>
                                        <%= mealsByDay['Sunday'][2][0].name %>
                                            <% } else { %>
                                                no meals
                                                <% } %>
                                </button>

                                <button type="submit" name="action" class="meal3" value="Sunday">
                                    <% if (mealsByDay['Sunday'][3].length> 0) { %>
                                        <%= mealsByDay['Sunday'][3][0].name %>
                                            <% } else { %>
                                                no meals
                                                <% } %>
                                </button>
                            </form>
                        </div>
                        <!--Monday-->
                        <div class="day">
                            <form action="/calendar/updateDay" method="POST">
                            <button  type="submit" name="action" value = "Monday" class="dayType"><u>Monday</u><p style="font-weight: normal; font-size: 11px">(<%= weekDates[1] %>)</p></button>
                            <button type="submit" name="action" value = "Monday" class="meal1">
                                <% if (mealsByDay['Monday'][1].length> 0) { %>
                                    <%= mealsByDay['Monday'][1][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Monday" class="meal2">
                                <% if (mealsByDay['Monday'][2].length> 0) { %>
                                    <%= mealsByDay['Monday'][2][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Monday" class="meal3">
                                <% if (mealsByDay['Monday'][3].length> 0) { %>
                                    <%= mealsByDay['Monday'][3][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button></form>
                        </div>
                        <!--Tuesday-->
                        <div class="day">
                            <form action="/calendar/updateDay" method="POST">
                            <button type="submit" name="action" value = "Tuesday" class="dayType"><u>Tuesday</u><p style="font-weight: normal; font-size: 11px">(<%= weekDates[2] %>)</p></button>
                            <button type="submit" name="action" value = "Tuesday" class="meal1">
                                <% if (mealsByDay['Tuesday'][1].length> 0) { %>
                                    <p class="recipeName"><%= mealsByDay['Tuesday'][1][0].name %>
                                        </p><% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Tuesday" class="meal2">
                                <% if (mealsByDay['Tuesday'][2].length> 0) { %>
                                    
                                    <%= mealsByDay['Tuesday'][2][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Tuesday" class="meal3">
                                <% if (mealsByDay['Tuesday'][3].length> 0) { %>
                                    <%= mealsByDay['Tuesday'][3][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                        </form>
                        </div>
                        <!--Wednesday-->
                        <div class="day">
                            <form action="/calendar/updateDay" method="POST">
                            <button type="submit" name="action" value = "Wednesday" class="dayType"><u>Wednesday</u><p style="font-weight: normal; font-size: 11px">(<%= weekDates[3] %>)</p></button>
                            <button type="submit" name="action" value = "Wednesday" class="meal1">
                                <% if (mealsByDay['Wednesday'][1].length> 0) { %>
                                    <%= mealsByDay['Wednesday'][1][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Wednesday" class="meal2">
                                <% if (mealsByDay['Wednesday'][2].length> 0) { %>
                                    <%= mealsByDay['Wednesday'][2][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Wednesday" class="meal3">
                                <% if (mealsByDay['Wednesday'][3].length> 0) { %>
                                    <%= mealsByDay['Wednesday'][3][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                                        </button></form>
                        </div>
                        <!--Thursday-->
                        <div class="day">
                            <form action="/calendar/updateDay" method="POST">
                            <button type="submit" name="action" value = "Thursday" class="dayType"><u>Thursday</u><p style="font-weight: normal; font-size: 11px">(<%= weekDates[4] %>)</p></button>
                            <button type="submit" name="action" value = "Thursday" class="meal1">
                                <% if (mealsByDay['Thursday'][1].length> 0) { %>
                                    <%= mealsByDay['Thursday'][1][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Thursday" class="meal2">
                                <% if (mealsByDay['Thursday'][2].length> 0) { %>
                                    <%= mealsByDay['Thursday'][2][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Thursday" class="meal3">
                                <% if (mealsByDay['Thursday'][3].length> 0) { %>
                                    <%= mealsByDay['Thursday'][3][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                                        </button>
                                    </form>
                        </div>
                        <!--Friday-->
                        <div class="day">
                            <form action="/calendar/updateDay" method="POST">
                            <button type="submit" name="action" value = "Friday" class="dayType"><u>Friday</u><p style="font-weight: normal; font-size: 11px">(<%= weekDates[5] %>)</p></button>
                            <button type="submit" name="action" value = "Friday" class="meal1">
                                <% if (mealsByDay['Friday'][1].length> 0) { %>
                                    <%= mealsByDay['Friday'][1][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Friday" class="meal2">
                                <% if (mealsByDay['Friday'][2].length> 0) { %>
                                    <%= mealsByDay['Friday'][2][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Friday" class="meal3">
                                <% if (mealsByDay['Friday'][3].length> 0) { %>
                                    <%= mealsByDay['Friday'][3][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                        </form>
                        </div>
                        <!--Saturday-->
                        <div class="day">
                            <form action="/calendar/updateDay" method="POST">
                            <button type="submit" name="action" value = "Saturday" class="dayType"><u>Saturday</u><p style="font-weight: normal; font-size: 11px">(<%= weekDates[6] %>)</p></button>
                            <button type="submit" name="action" value = "Saturday" class="meal1">
                                <% if (mealsByDay['Saturday'][1].length> 0) { %>
                                    <%= mealsByDay['Saturday'][1][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Saturday" class="meal2">
                                <% if (mealsByDay['Saturday'][2].length> 0) { %>
                                    <%= mealsByDay['Saturday'][2][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                            <button type="submit" name="action" value = "Saturday" class="meal3">
                                <% if (mealsByDay['Saturday'][3].length> 0) { %>
                                    <%= mealsByDay['Saturday'][3][0].name %>
                                        <% } else { %>
                                            no meals
                                            <% } %>
                            </button>
                        </form>
                        </div>
                    </div>
                </div>
                <!--MEAL GENERATOR-->
                <div class="right col-4 column" style="background-color: #dddddd; display: block;">
                    <!--Text with button-->
                    <div style="display:inline; width: 100%;">
                        <h2>Meal Generator</h2>

                        <p>Click the button below to generate weekly meals:</p>
                        <form action="/calendar/generate" method="POST">
                            <label for="dietPreference">Diet Type:</label>
                            <select id="dietPreference" name="dietPreference">
                                <option value="">Regular</option>
                                <option value="vegetarian">Vegetarian</option>
                                <option value="vegan">Vegan</option>
                                <option value="gluten free">Gluten Free</option>
                            </select>
                            <br><br>
                            <label for="minCalories">Minimum Calories:</label>
                            <input type="number" id="minCalories" name="minCalories" placeholder="Enter minimum calories..." value="0">
                            <br>
                            <label for="minCalories">Maximum Calories:</label>
                            <input type="number" id="maxCalories" name="maxCalories" placeholder="Enter maximum calories..." value="3000">
                            <br>
                            <label for="minCalories">Minimum Protein:</label>
                            <input type="number" id="minProtein" name="minProtein" placeholder="Enter minimum protein..." value="0">
                            <br><br>
                            <br><br>
                            <button class="generate">Generate Weekly Meals</button>
                        </form>
                        <p style="padding-top:15px">Selected Day: <u><%= dayOfWeek %></u></p>
                        
                    </div>
                    <!--MealContainer classes-->
                    <!--Breakfast-->
                    <div id="mealDisplay"></div>
                   
                    <div class="mealContainer" style="margin-top:10px">
                        <div class="mealType" style="">
                            <p style="display:inline">Breakfast</p>
                            <br>
                            <p style="display:inline">
                             
                                <% if (selectedDay && selectedDay[1] && selectedDay[1].length> 0) { %>
                            <%= selectedDay[1][0].name %>
                            <% } else { %> no meals <% } %>
                            </p>
                        </div>
                        <div class="col-4" style="display:inline; width: 70%; ">
                            <p style="display:inline;"><% if (selectedDay && selectedDay[1] && selectedDay[1].length> 0) { %>
                                <%= selectedDay[1][0].name %>
                                <% } %></p>
                            <p style="display:inline;"><% if (selectedDay && selectedDay[1] && selectedDay[1].length> 0) { %>
                                <%= selectedDay[1][0].name %>
                                <% } %></p>
                        </div>
                        <div style="display:inline; width: 10%; position:relative;">
                            <form action="/calendar/newMeal" method="POST" style="display:inline-block">
                                <button
                            style="background-color:white">
                            <image src="images/reload.png"
                                style="display:inline; color: gray; opacity: .4; height: 20px; cursor: pointer;">
                            </image>
                        </button></form>
                    </div>
                    <div style="display:inline; width: 10%; position:relative;">
                        <form action="/calendar/deleteMeal" method="POST" style="display:inline-block">
                            <button
                        style="background-color:white">
                        <image src="images/trash.png"
                            style="display:inline; color: gray; opacity: .4; height: 20px; cursor: pointer;">
                        </image>
                    </button></form>
                </div>
                    </div>
                    
                    <!--Lunch-->
                    <% if (selectedDay && selectedDay[2] && selectedDay[2].length> 0) { %>
                    <div class="mealContainer">
                        <div class="mealType">
                            <p style="display:inline">Lunch</p>
                            <br>
                            <image class="smallImg" src="images/foodImageHolder.jpg" style="display:inline"></image>
                            <p style="display:inline">
                                <%= selectedDay[2][0].name %>
                            </p>
                        </div>
                        <div class="col-4" style="display:inline; width: 70%; ">
                            <p style="display:inline;">1 servings | </p>
                            <p style="display:inline;">Ingredients: Chicken</p>
                        </div>
                    </div>
                    <% } %>
                    <!--Dinner-->
                    <% if (selectedDay && selectedDay[3] && selectedDay[3].length> 0) { %>
                    <div class="mealContainer">
                        <div class="mealType">
                            <p style="display:inline">Dinner</p>
                            <br>
                            <image class="smallImg" src="images/foodImageHolder.jpg" style="display:inline"></image>
                            <p style="display:inline">
                                <%= selectedDay[3][0].name %>
                            </p>
                        </div>
                        <div class="col-4" style="display:inline; width: 70%; ">
                            <div style="display:inline; width: 90%;">
                                <p style="display:inline;">2 servings | </p>
                                <p style="display:inline;">Ingredients: Chicken, curry</p>
                            </div>

                            <div style="display:inline; width: 10%; position:relative;"><button
                                    style="background-color:white">
                                    <image src="images/reload.png"
                                        style="display:inline; color: gray; opacity: .4; height: 20px; cursor: pointer;">
                                    </image>
                                </button>
                            </div>
                        </div>
                    </div>
                    <% } %>
                </div>
            </div>
            <div class="mealContainer" style="margin-top:10px">
                <div class="mealType" style="">
                    <p style="display:inline">Breakfast</p>
                    <br>
                    <p style="display:inline">
                     
                        <% if (selectedDay && selectedDay[1] && selectedDay[1].length> 0) { %>
                    <%= selectedDay[1][0].name %>
                    <% } else { %> no meals <% } %>
                    </p>
                </div>
                <div class="col-4" style="display:inline; width: 70%; ">
                    <p style="display:inline;"><% if (selectedDay && selectedDay[1] && selectedDay[1].length> 0) { %>
                        <%= selectedDay[1][0].name %>
                        <% } %></p>
                    <p style="display:inline;"><% if (selectedDay && selectedDay[1] && selectedDay[1].length> 0) { %>
                        <%= selectedDay[1][0].name %>
                        <% } %></p>
                </div>
                <div style="display:inline; width: 10%; position:relative;">
                    <form id="new-meal-form" method="POST" style="display:inline-block">
                        <button
                    style="background-color:white">
                    <image src="images/reload.png"
                        style="display:inline; color: gray; opacity: .4; height: 20px; cursor: pointer;">
                    </image>
                </button></form>
            </div>
            <div style="display:inline; width: 10%; position:relative;">
                <form id="new-meal-form" method="POST" style="display:inline-block">
                    <button
                style="background-color:white">
                <image src="images/trash.png"
                    style="display:inline; color: gray; opacity: .4; height: 20px; cursor: pointer;">
                </image>
            </button></form>
        </div>
            </div>
        </div>
        <script>
            // JavaScript code to set the form action dynamically
            document.getElementById('new-meal-form').action = "/calendar/newMeal/<%= selectedDay[1][0] %>";
          </script>
</body>

